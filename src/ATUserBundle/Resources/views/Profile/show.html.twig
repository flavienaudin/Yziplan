{% extends "ATUserBundle::layout_cboxed.html.twig" %}

{# Données d'entrée !
- user (User) L'utilisateur dont on affiche le profil
- form_mandatory_information (Form) Le formulaire des informations obligatoires
- form_biography (Form|null) Le formulaire pour la partie "Biographie"
- form_basic_information (Form|null) Le formulaire pour la partie "Information basique"
#}

{% block title %}
    {% spaceless %}{{ parent() }} - {{ "profile.show.page.meta_title"|trans }}{% endspaceless %}
{% endblock %}


{% block fos_user_content %}
    <div class="c-header">
        <h2>{{ user }}
            <small>{{ user.email }}</small>
        </h2>
    </div>

    <div class="card" id="profile-main">
        <div class="pm-overview c-overflow">
            <div class="pmo-pic">
                <div class="p-relative">
                    {# TODO : user avatar #}
                    <a href="#"> <img class="img-responsive" src="{{ asset('bundles/atuser/profile/avatar_default.png') }}" alt="AVATAR"> </a>

                    {#<div class="pmop-message">
                        <a href="{{ path("fos_user_profile_edit") }}" class="btn palette-White bg btn-float z-depth-1"><i class="zmdi zmdi-edit"></i></a>
                    </div>#}

                    <a href="#" class="pmop-edit"> <i class="zmdi zmdi-camera"></i> <span class="hidden-xs">{{ "profile.show.page.avatar_update"|trans }}</span> </a>
                </div>

                <div class="pmo-stat">
                    <h2 class="m-0 c-white">156</h2>
                    Total Invitations
                </div>

                {#<div class="pmo-block pmo-contact hidden-xs">
                    <h2>Contact</h2>

                    <ul>
                        <li><i class="zmdi zmdi-email"></i> {{ app.user.email }}</li>
                        <li><i class="zmdi zmdi-phone"></i> 00971 12345678 9</li>
                        <li><i class="zmdi zmdi-facebook-box"></i> malinda.hollaway</li>
                        <li><i class="zmdi zmdi-google"></i> malinda.hollaway</li>
                        <li>
                            <i class="zmdi zmdi-pin"></i>
                            <address class="m-b-0 ng-binding">
                                44-46 Morningside Road,<br> Edinburgh,<br> Scotland
                            </address>
                        </li>
                    </ul>
                </div>#}
            </div>
        </div>

        <div class="pm-body clearfix">
            <div role="tabpanel">
                <ul class="tab-nav tn-justified">
                    <li class="waves-effect"><a href="#profile-about" aria-controls="profile-about" role="tab" data-toggle="tab">About</a></li>
                    <li class="active waves-effect"><a href="#profile-connections" aria-controls="profile-connections" role="tab" data-toggle="tab">Connections</a></li>
                    <li class="waves-effect"><a href="#profile-preferences" aria-controls="profile-preferences" role="tab" data-toggle="tab">Preferences</a></li>
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane" id="profile-about">
                        {{ include('@ATUser/Profile/partials/profile_about.html.twig', {
                            'user':user,
                            'form_mandatory_information':form_mandatory_information,
                            'form_biography':form_biography,
                            'form_basic_information':form_basic_information
                        }) }}
                    </div>
                    <div role="tabpanel" class="tab-pane active" id="profile-connections">
                        {{ include('@ATUser/Contact/partials/display_contacts.html.twig', {'contacts':user.contacts}) }}
                    </div>
                    <div role="tabpanel" class="tab-pane" id="profile-preferences">
                        {{ include('@ATUser/Profile/partials/profile_preferences.html.twig') }}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock fos_user_content %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset("bundles/app/css/bootstrap-datetimepicker.min.css") }}">
    <link rel="stylesheet" href="{{ asset("bundles/app/css/jquery.bootgrid.css") }}">
    <link rel="stylesheet" href="{{ asset("bundles/app/css/selectize.bootstrap3.css") }}">
    <link rel="stylesheet" href="{{ asset("bundles/app/css/selectize.at.css") }}">
    <link rel="stylesheet" href="{{ asset("bundles/app/css/sweetalert.css") }}">
{% endblock stylesheets %}

{% block top_javascripts %}
    {{ parent() }}
    <script src="{{ asset("bundles/app/js/jquery.bootgrid.updated.min.js") }}"></script>
    <script src="{{ asset("bundles/app/js/selectize.js") }}"></script>
    <script src="{{ asset("includes/js/at-selectize.js") }}"></script>
    <script src="{{ asset("bundles/app/js/sweetalert.min.js") }}"></script>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/app/js/bootstrap-datetimepicker.min.js') }}"></script>
    <script src="{{ asset('bundles/atuser/js/profile/at-about.js') }}"></script>
{% endblock javascripts %}