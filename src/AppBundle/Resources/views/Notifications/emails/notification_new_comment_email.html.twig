{% extends ':Email:template_email.html.twig' %}

{# Données :
- recipient_name (string) Le nom du destinaire

- eventInvitation (EventInvitation) L'invitation de l'invité à qui envoyer l'email
- notification (Notification) La notification a envoyé
- triggerer (EventInvitation) L'invité ayant généré la notification
#}

{% block subject_email %}{{ 'notifications.emails.new_comment.subject'|trans({"%event_name%":eventInvitation.event.name}) }}{% endblock %}

{% block text_body %}
    {% if notification.data.subject.type == 'module' %}
        {{ 'notifications.emails.new_comment.body.paragraph_module'|trans({"%triggerer%":triggerer.displayableName(true, true), "%subject_name%":notification.data.subject.name}) }}
    {% else %}
        {{ 'notifications.emails.new_comment.body.paragraph_event'|trans({"%triggerer%":triggerer.displayableName(true, true)}) }}
    {% endif %}
    {% if notification.data.message is not empty %}
        {{ notification.data.message }}
    {% endif %}
    {{ 'notifications.emails.common.invitation_link'|trans }}
    {{ url('displayEventInvitation', {'token':eventInvitation.token}) }}
{% endblock %}
{% block text_footer %}
    {{ parent() }}
    {{ "notifications.emails.common.preferences_link"|trans }}
    {{ url('setEmailNotificationPreferences', {'token':eventInvitation.token}) }}
{% endblock text_footer %}

{% block html_body %}{% spaceless %}
    {% if notification.data.subject.type == 'module' %}
        {{ 'notifications.emails.new_comment.body.paragraph_module'|trans({"%triggerer%":triggerer.displayableName(true, true), "%subject_name%":notification.data.subject.name}) }}
    {% else %}
        {{ 'notifications.emails.new_comment.body.paragraph_event'|trans({"%triggerer%":triggerer.displayableName(true, true)}) }}
    {% endif %}
    {% if notification.data.message is not empty %}
        <div style="min-height: 20px;padding: 9px;margin-bottom: 20px;background-color: #f5f5f5;border: 1px solid #e3e3e3;border-radius: 2px;
                                                -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);">
            {{ notification.data.message }}
        </div>
    {% endif %}
    {{ 'notifications.emails.common.invitation_link'|trans }}<br>
    {{ url('displayEventInvitation', {'token':eventInvitation.token}) }}
{% endspaceless %}{% endblock %}
{% block html_footer %}
    {{ parent() }}
    {{ "notifications.emails.common.preferences_link"|trans }}
    {{ url('setEmailNotificationPreferences', {'token':eventInvitation.token}) }}
{% endblock html_footer %}