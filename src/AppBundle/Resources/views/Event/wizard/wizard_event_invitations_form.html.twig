{% extends "@App/Event/partials/invitations/invitations_new_forms.html.twig" %}
{# Données d'entrée :
- userEventInvitation (EventInvitation) L'invitation à afficher (incluant l'événement concerné)
- invitationsForm (Form) Formulaire permettant d'ajouter des emails
#}

{% block form_start %}
    {{ form_start(invitationsForm , {'attr':{'id': 'guestEmails'}, 'action':path('wizardNewEventStep3',{'token':userEventInvitation.event.token})}) }}
{% endblock form_start %}

{% block action_buttons %}
    <div class="text-center">
        <button type="submit" class="btn btn-primary m-b-10" id="invitations_sendInvitations" name="sendInvitations" value="1">{{ "event.wizard.button.send_invitations"|trans }}</button>
    </div>
    {% if event_public_invitation_display_block is defined %}
        {{ event_public_invitation_display_block }}
    {% endif %}
    <div class="text-center">
        <a href="{{ path('wizardNewEventStep2',{'token':userEventInvitation.event.token}) }}" class="btn btn-flat m-b-10" role="button">{{ "global.button.previousStep"|trans }}</a> <a
                href="{{ path('displayEvent',{'token':userEventInvitation.event.token}) }}" id="invitations_later" class="btn btn-flat f-700 c-blue m-b-10"
                role="button">{{ "global.button.later"|trans }}</a>
    </div>
{% endblock action_buttons %}

{% block belowInvitationForm %}{% endblock %}

{#<script>#}
{% block js_document_ready %}
    $('#shareEventFB_container').remove();

    $('form#guestEmails').on('submit', function (e) {
        if ($('#eventInvitations_newEmails').val().length == 0) {
            e.preventDefault();
            swal({
                title: "{{ "invitations_list.swal.no_email_selected.title"|trans }}",
                html: "{{ "invitations_list.swal.no_email_selected.text"|trans }}",
                type: "warning",
                showCancelButton: true,
                showLoaderOnConfirm: true,
                cancelButtonText: "{{ "global.button.cancel"|trans }}",
                confirmButtonText: "{{ "global.button.skip"|trans }}"
            }).then(function () {
                window.location = $('#invitations_later').attr('href');
            });
        }
    });
{% endblock js_document_ready %}

{% block js_function %}{% endblock js_function %}
{#</script>#}