{% if moduleForm is not null %}
    {{ form_start(moduleForm) }}
{% endif %}
<div class="card {% block moduleCardClass %}{% endblock %}" id="module-{{ module.token }}">
    <div class="card-header {% block moduleHeaderClass %}{% endblock %}" {% block moduleHeaderAttributs %}{% endblock %}>
        {% block moduleHeader %}
            <small class="pull-right"><a href="#">{{ "global.link.top"|trans }}</a></small>
            {% if moduleForm is not null %}
            <div class="form-group">
                {{ form_label(moduleForm.name, 'module.form.name.label', {'label_attr':{'class':'sr-only'}}) }}
                <div class="fg-line">
                    {{ form_widget(moduleForm.name, {'attr':{'placeholder':'module.form.name.placeholder'}}) }}
                    {{ form_errors(moduleForm.name) }}
                </div>
            </div>
            {% else %}
            <h2>{{ module.name is not empty?module.name }}</h2>
            <small>{{ module.description|nl2br|raw }}</small>
            {% endif %}

            {% if allowEdit is defined and allowEdit %}
            <ul class="actions">
                <li class="dropdown">
                    <a href="" data-toggle="dropdown"><i class="zmdi zmdi-more-vert"></i></a>
                    <ul class="dropdown-menu dropdown-menu-right">
                        <li>
                            <a href="{{ path('removeEventModule', {'tokenEdition':module.tokenEdition}) }}" id="removeModule{{ module.tokenEdition }}" data-target="{{ module.token }}">
                                {{ "global.button.delete"|trans }}</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <script>
                $('a#removeModule{{ module.tokenEdition }}').on('click', function (e) {
                    $.ajax({
                        url: $(this).attr("href"),
                        type: 'post'
                    }).done(function (response, textStatus, xhr) {
                        if (response.actionResult === true) {
                            $('#module-{{ module.token }}').remove();
                        }
                    }).fail(function (jqXHR, textStatus, errorThrown) {
                        // nothing
                    }).always(function (responseDataOrJSON) {
                        if (responseDataOrJSON.responseJSON) {
                            responseDataOrJSON = responseDataOrJSON.responseJSON;
                        }
                        if (responseDataOrJSON.messages) {
                            var messages = responseDataOrJSON.messages;
                            for (var messageType in messages) {
                                if (messages.hasOwnProperty(messageType)) {
                                    messages[messageType].forEach(function (mess) {
                                        toastr[messageType](mess);
                                    });
                                }
                            }
                        }
                    });
                    return false;
                });
            </script>
            {% endif %}
        {% endblock moduleHeader %}
    </div>
    <div class="card-body card-padding {% block moduleInformationClass %}{% endblock %}" {% block moduleInformationAttributs %}{% endblock %}>
        {% block moduleInformation %}
            <ul class="tab-nav tn-justified tn-icon" role="tablist">
                <li role="presentation" class="active">
                    <a class="col-sx-6" href="#tab-1" aria-controls="tab-1" role="tab" data-toggle="tab"> <i class="zmdi zmdi-home icon-tab"></i> </a>
                </li>
                {% if moduleForm is not null %}
                    <li role="presentation">
                        <a class="col-xs-6" href="#tab-2" aria-controls="tab-2" role="tab" data-toggle="tab"> <i class="zmdi zmdi-settings icon-tab"></i> </a>
                    </li>
                {% endif %}
            </ul>

            <div class="tab-content p-20">
                <div role="tabpanel" class="tab-pane animated fadeIn in active" id="tab-1">
                    {% if moduleForm is not null %}
                        <div class="form-group">
                            {{ form_label(moduleForm.description, 'module.form.description.label', {'label_attr':{'class':'sr-only'}}) }}
                            <div class="fg-line">
                                {{ form_widget(moduleForm.description, {'attr':{'rows':3,'placeholder':'module.form.description.placeholder'}}) }}
                                {{ form_errors(moduleForm.description) }}
                            </div>
                        </div>
                    {% else %}
                        <dl>
                            <dt>Description</dt>
                            <dd>{{ module.description|nl2br|raw }}</dd>
                        </dl>
                        {% if module.paymentModule is not null %}
                            {#{{ include("@App/Event/module/displayPaymentModule.html.twig", {"module":module}) }}#}
                        {% endif %}
                    {% endif %}
                </div>

                {% if moduleForm is not null %}
                    <div role="tabpanel" class="tab-pane animated fadeIn" id="tab-2">
                        <div class="form-group">
                            {{ form_label(moduleForm.responseDeadline, 'module.form.responseDeadline.label') }}
                            <div class="form-inline fg-line">
                                {{ form_widget(moduleForm.responseDeadline, {'attr':{'class':'', 'placeholder':'module.form.responseDeadline.placeholder'}}) }}
                            </div>
                            {{ form_errors(moduleForm.responseDeadline) }}
                        </div>
                        <dl class="dl-horizontal">
                            <dt>Status</dt>
                            <dd>{{ module.status|trans }}</dd>
                        </dl>
                    </div>
                {% endif %}
            </div>



        {% endblock moduleInformation %}
    </div>
    <div class="card-body card-padding {% block moduleBodyClass %}{% endblock %}" {% block moduleBodyAttributs %}{% endblock %}>
        {% block moduleBody %}
        {% endblock moduleBody %}
    </div>
    <div class="card-footer">
        {% block moduleFooter %}
        {% endblock moduleFooter %}
    </div>
</div>
{% if moduleForm is not null %}
    {{ form_end(moduleForm) }}
{% endif %}