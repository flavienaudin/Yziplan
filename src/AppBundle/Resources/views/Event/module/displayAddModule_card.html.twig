{# Données d'entrée :
- event (Event) Evenement affiché
#}

<div class="card c-dark z-depth-1" id="addModule-main-div">
    <div class="card-header palette-Teal bg m-b-10">
        <h2><i class="zmdi zmdi-collection-plus zmdi-hc-lg c-white m-r-15"></i>{{ "addModule.display.title"|trans }}</h2>
    </div>
    <div class="card-body card-padding-xs" id="addModule-body-card">
        <div class="row">
            <div class="col-xs-3 col-sm-2 col-sm-offset-1 text-center">
                <a class="add-pollmodule-link" href="{{ url('addEventModule', {'token': event.token, 'type':constant('AppBundle\\Utils\\enum\\ModuleType::POLL_MODULE'),
                    'subtype':constant('AppBundle\\Utils\\enum\\PollModuleType::WHAT')}) }}" id="addWhatPollModule"> <i class="waves-effect zmdi zmdi-pin-help zmdi-hc-3x"></i>
                    <p>{{ "pollmodule.add_link.what"|trans }}</p></a>
            </div>
            <div class="col-xs-3 col-sm-2 text-center">
                <a class="add-pollmodule-link" href="{{ url('addEventModule', {'token': event.token,'type':constant('AppBundle\\Utils\\enum\\ModuleType::POLL_MODULE'),
                    'subtype':constant('AppBundle\\Utils\\enum\\PollModuleType::WHEN')}) }}" id="addWhenPollModule"> <i class="waves-effect zmdi zmdi-calendar zmdi-hc-3x"></i>
                    <p>{{ "pollmodule.add_link.when"|trans }}</p></a>
            </div>
            <div class="col-xs-3 col-sm-2 text-center">
                <a class="add-pollmodule-link" href="{{ url('addEventModule', {'token': event.token,'type':constant('AppBundle\\Utils\\enum\\ModuleType::POLL_MODULE'),
                    'subtype':constant('AppBundle\\Utils\\enum\\PollModuleType::WHERE')}) }}" id="addWherePollModule"> <i class="waves-effect zmdi zmdi-pin zmdi-hc-3x"></i>
                    <p>{{ "pollmodule.add_link.where"|trans }}</p></a>
            </div>
            <div class="col-xs-3 col-sm-2 text-center">
                <a class="add-pollmodule-link" href="{{ url('addEventModule', {'token': event.token,'type':constant('AppBundle\\Utils\\enum\\ModuleType::POLL_MODULE'),
                    'subtype':constant('AppBundle\\Utils\\enum\\PollModuleType::WHO_BRINGS_WHAT')}) }}" id="addWhoBringsWhatPollModule"> <i
                            class="waves-effect zmdi zmdi-format-list-bulleted zmdi-hc-3x"></i>
                    <p>{{ "pollmodule.add_link.whobringswhat"|trans }}</p></a>

            </div>
            <div class="col-xs-3 col-sm-2 text-center">
                <a class="add-pollmodule-link" href="{{ url('addEventModule', {'token': event.token,'type':constant('AppBundle\\Utils\\enum\\ModuleType::POLL_MODULE'),
                    'subtype':constant('AppBundle\\Utils\\enum\\PollModuleType::ACTIVITY')}) }}" id="addActivityPollModule"> <i class="waves-effect zmdi zmdi-ticket-star zmdi-hc-3x"></i>
                    <p>{{ "pollmodule.add_link.activity"|trans }}</p></a>
            </div>
        </div>

        <script>
            $('.add-pollmodule-link').on('click', function (e) {
                {% block link_action_js %}
                var target = $(this);
                if (!eventInvitationValid && askGuestName !== undefined) {
                    e.preventDefault();
                    askGuestName(e, addModuleAction, [target, e]);
                } else {
                    addModuleAction([target, e]);
                }

                function addModuleAction(params) {
                    var target = params[0];
                    var e = params[1];
                    ajaxRequest(target, null, e, function (responseJSON, textStatus, jqXHR) {
                        var eventModulesContainer = $('#eventModulesContainer');
                        $(document).scrollTop($(eventModulesContainer).children().last().offset().top - 100);
                        $grid = $('.grid');
                        if ($grid[0]) {
                            $grid.masonry('layout');
                        }
                        LetterAvatar.transform();
                        {# TODO : désactiver le temps d'avoir une seule modal pour l'ajout multiple de propositions et édition du nom/description
                        if (responseJSON.hasOwnProperty('data') && responseJSON['data'].hasOwnProperty('moduleToken')) {
                            $('#moduleEdit_modal_' + responseJSON['data']['moduleToken']).modal('show');
                        }#}
                    }, null, null);
                }
                {% endblock link_action_js %}
            });
        </script>

    </div>
</div>

