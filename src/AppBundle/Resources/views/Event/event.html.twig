{% extends "@App/Event/layout.html.twig" %}

{% block mainMenu_listItems %}
    <li><a href="#event-header-card">{{ "global.event"|trans|capitalize }}</a></li>
    {% for moduleDescription in modules if moduleDescription.module.name is not empty and moduleDescription.module.status != constant("AppBundle\\Entity\\enum\\ModuleStatus::DELETED") %}
        <li><a href="#module-{{ moduleDescription.module.token }}">{{ moduleDescription.module.name|capitalize }}</a></li>
    {% endfor %}
{% endblock mainMenu_listItems %}

{% block event_content %}
    {{ include("@App/Event/partials/eventHeaderCard.html.twig", {'event':event, 'allowEdit':allowEdit, 'eventForm':eventForm}) }}

    <div class="row">
        <div class="col-xs-12 col-sm-8" id="eventModulesContainer">
            {% for moduleDescription in modules if moduleDescription.module.status != constant("AppBundle\\Entity\\enum\\ModuleStatus::DELETED") %}
                {% if moduleDescription.module.pollModule is not null %}
                    {{ include('@App/Event/module/displayPollModule.html.twig', {'module':moduleDescription.module,'allowEdit':moduleDescription.allowEdit,'moduleForm':moduleDescription.moduleForm}) }}
                {% elseif moduleDescription.module.expenseModule is not null %}
                    {{ include('@App/Event/module/displayExpenseModule.html.twig', {'module':moduleDescription.module,'allowEdit':moduleDescription.allowEdit,'moduleForm':moduleDescription.moduleForm}) }}
                {% else %}
                    {{ include('@App/Event/module/displayModule.html.twig', {'module':moduleDescription.module,'allowEdit':moduleDescription.allowEdit,'moduleForm':moduleDescription.moduleForm}) }}
                {% endif %}
            {% endfor %}
        </div>

        <div class="col-xs-12 col-sm-4">
            {% if event.creator is not null %}
                {{ render(controller("AppBundle:Event:displayAppUserPartial", {"appUserId":event.creator.appUser.id})) }}
            {% endif %}
            {{ include("@App/Event/partials/eventTechniqueDataCard.html.twig", {"event":event}) }}
        </div>
    </div>


{% endblock event_content %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset("bundles/app/css/bootstrap-datetimepicker.min.css") }}">
    <link rel="stylesheet" href="{{ asset("bundles/app/css/bootstrap-clockpicker.css") }}">
    <link rel="stylesheet" href="{{ asset("bundles/app/css/sweetalert.css") }}">

    <style>
        .poll-container {
            display: table;
            table-layout: auto;
            border-collapse: separate;
            border-spacing: 0 2px;
            margin: 0 auto;
        }

        .poll-container .pc-groupe-ligne {
            display: table-row-group;
        }

        .poll-container .pc-ligne {
            display: table-row;
        }

        .poll-container .pc-ligne .pcl-celulle {
            display: table-cell;
            text-align: center;
            padding: 5px 10px;
            vertical-align: middle;
        }

        .poll-container .pc-ligne .pcl-end-spacer {
            display: table-cell;
        }

        .poll-container .pc-ligne .pcl-celulle:not(:first-child) {
            width: 30px;
        }

        .poll-container .pc-ligne .pcl-celulle:first-child {
            text-align: left;
            font-weight: bold;
            min-width: 100px;
        }

    </style>

{% endblock stylesheets %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/app/js/bootstrap-datetimepicker.min.js') }}"></script>
    <script src="{{ asset("bundles/app/js/bootstrap-clockpicker.js") }}"></script>
    <script src="{{ asset("bundles/app/js/sweetalert.min.js") }}"></script>

    <script src="{{ asset("bundles/app/js/at-event.js") }}"></script>
{% endblock %}