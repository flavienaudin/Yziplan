{# Tuile d'affichage de l'invitation en cours sur la page d'événement pour que l'utilisateur renseigne ses informations
Données d'entrée :
- userEventInvitation (EventInvitation) Invitation de l'utilisateur de l'utilisateur
- userEventInvitationForm (Form) Formulaire permettant de répondre à l'invitation
#}

<div class="card c-dark z-depth-2" id="user-event-invitation-card">
    <div class="card-header palette-Teal bg m-b-20">
        <div class="media">
            <div class="pull-left"></div>
            <div class="pull-right">
                    {% if userEventInvitation.creator %}
                        <span class="label label-danger">{{ "eventInvitation.profile.card.badge.creator"|trans }}</span>
                    {% elseif userEventInvitation.administrator %}
                        <span class="label label-warning">{{ "eventInvitation.profile.card.badge.administrator"|trans }}</span>
                    {% else %}
                        <span class="label label-success">{{ "eventInvitation.profile.card.badge.guest"|trans }}</span>
                    {% endif %}
            </div>
            <div class="media-body">
                <h2><span>{{ "eventInvitation.profile.card.title"|trans }}</span>
                    <small></small>
                </h2>
            </div>
        </div>
    </div>
    <div class="card-body card-padding">
        {{ include('@App/Event/partials/eventInvitation_profile_form.html.twig',{
            'userEventInvitation' : userEventInvitation,
            'userEventInvitationForm' : userEventInvitationForm
        }) }}
    </div>

    {% if userEventInvitation.applicationUser is null or userEventInvitation.applicationUser.accountUser is null %}
        <div class="card-body card-padding">
            <label class="control-label text-info" for="url_user_invitation">{{ "eventInvitation.url.text"|trans }}&nbsp;: </label>
            <div class="input-group">
                <input id="url_user_invitation" type="text" class="form-control" readonly="readonly" value="{{ url("displayEventInvitation",{'token':userEventInvitation.token}) }}"> <span
                        class="input-group-btn"><button type="button" id="btn_copy_invitation_url" class="btn btn-primary" data-clipboard-target="#url_user_invitation">
                        <i class="zmdi zmdi-copy"></i> {{ "global.button.copy"|trans }}</button></span>
            </div>
        </div>
    {% endif %}

    <div class="card-footer card-padding">
        {{ form_start(userEventInvitationAnswerForm, {'action': path('displayEvent', {'token':userEventInvitation.event.token}), 'attr':{'id':'userEventInvitationAnswer','class':'answer-form'}}) }}
        {{ form_row(userEventInvitationAnswerForm.answer,{
            'label_attr':{'class' : 'sr-only'},
            'attr':{'type' : 'answer'}
        }) }}

        {{ form_rest(userEventInvitationAnswerForm) }}
        {{ form_end(userEventInvitationAnswerForm) }}
        <script>
            $("input[name='event_invitation_anwser[answer]']").on('change', function (e) {
                $(this).closest('form').submit();
            });
            $('form#userEventInvitationAnswer').on('submit', function (e) {
                ajaxFormSubmission(this, e, null, null, null);
            });
        </script>
    </div>
</div>