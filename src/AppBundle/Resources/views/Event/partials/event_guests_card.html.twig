{# Données d'entrée :
- userEventInvitation (EventInvitation) L'invitation de l'utilisateur "connecté"
- event (Event) L'événement courant pour afficher les invitations
- userEventInvitationAnswerForm (Form) Formulaire de réponse à l'invitation
#}


<div class="card c-dark z-depth-1">
    <div class="card-header palette-Teal bg">
        <h2><i class="zmdi zmdi-accounts-add zmdi-hc-lg c-white m-r-15"></i>{{ "invitations_list.display.title"|trans }}</h2>
    </div>

    <div class="card-body">
        {{ include('@App/Event/partials/profile/eventInvitation_profile_answer_form.html.twig',{
            'userEventInvitation' : userEventInvitation,
            'userEventInvitationAnswerForm' : userEventInvitationAnswerForm
        }) }}
    </div>

    <div class="card-body">
        {{ include("@App/Event/partials/guests_list/guestsList_card_body.html.twig", {
            'userEventInvitation' : userEventInvitation,
            'event':event}) }}
    </div>


    {% if (userEventInvitation.creator or userEventInvitation.administrator or userEventInvitation.event.guestsCanInvite) and (invitationsForm is not null
    or not userEventInvitation.event.invitationOnly) %}
        <div class="card-footer text-center">
            <a href="#invitations_new_modal" class="btn btn-primary m-b-10" data-toggle="modal">{{ "invitations_list.display.new_invitations"|trans }}</a>
            {% if event.eventInvitationEmailNotSent|length > 0 %}
                <a href="{{ path('sendEventInvitations', {"token":event.token}) }}" id="sendEmailInvitations" class="btn btn-danger m-b-10">{{ "invitations_list.display.send_email"|trans }}</a>
                <script>
                    $('#sendEmailInvitations').on('click', function (e) {
                        e.preventDefault();
                        var $link = $(this);
                        swal({
                            title: "{{ "invitations_list.swal.send_email_invitations.title"|trans }}",
                            text: "{{ "invitations_list.swal.send_email_invitations.text"|trans }}",
                            type: "question",
                            showCancelButton: true,
                            confirmButtonColor: "#2196f3",
                            confirmButtonText: '{{ "global.button.valid"|trans }}',
                            showLoaderOnConfirm: true
                        }).then(function () {
                            ajaxRequest($link, null, e, function (responseJSON, textStatus, jqXHR) {
                                $link.remove();
                            }, null, null);
                        });
                    });
                </script>
            {% endif %}
        </div>
        {{ include('@App/Event/partials/invitations/invitations_new_modal.html.twig', {'userEventInvitation':userEventInvitation,'invitationsForm':invitationsForm}) }}
    {% endif %}

</div>